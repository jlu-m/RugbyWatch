@page "/"
@using RugbyWatch.Services
@rendermode InteractiveServer

@inject ProcessMatchReportService processMatchReportService
@inject DownloadMatchReportService downloadMatchReportService

<PageTitle>Home</PageTitle>

<h1>Hola Palomita! te quiero muuuucho!</h1>

<button class="btn btn-primary"  @onclick="StartProcess">Process PDF Files</button>

@if(processedCount.HasValue)
{
    <p>Number of PDF files successfully processed: @processedCount</p>
}

@code {
    private int? processedCount = null;

    private async Task StartProcess() {
        Console.WriteLine("Donwloading regional match reports..."); 
        await downloadMatchReportService.DownloadPdfsAsync();
        Console.WriteLine("Processing regional match reports..."); 
        processedCount = await processMatchReportService.ProcessFilesAsync();
        StateHasChanged(); 
    }

}



